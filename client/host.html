<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
        <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    </head>
    <body>
        <div id="wrapper">
            <video id="player" playsinline controls>
                <source src="http://127.0.0.1:8000/static/videos/video.mp4" type="video/mp4"></source>
            </video>
        </div>
    </body>
    <style>
        body {
        margin: 0;
        }
        .plyr {
        height: 100%;
        width :100%;
        }
        #wrapper{
        display: flex;
        justify-content:center;
        width: 50%;
        height: 500px;
        background-color: rgb(0, 0, 0);
        }
        .plyr__video-wrapper {
        height: 100%;
        }
        .plyr__video-wrapper iframe {
        width: 100%;
        height: 100%;
        }
    </style>
    
    <script>
        const player = new Plyr('#player');
        async function sync() {
            const response = await fetch("http://127.0.0.1:8000/record",
                {
                    method: "POST",
                    headers: {'content-type': 'application/json'},
                    body: JSON.stringify({
                        "token": "abc",
                        "hostTime": player.currentTime,
                        "paused": player.paused,
                        "playing": player.playing,
                        "speed": player.speed
                    })
                })
                requestAnimationFrame(sync);
            }
            
        sync();
    </script>
</html>